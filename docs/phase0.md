# Фаза 0 — Подготовка и уточнение требований

## 1. Синхронизация видения и KPI
- Два партнёра: приоритет — прозрачность и единый контроль финансов/остатков.
- Критичные модули: закупки → склад → продажи → выкуп → финансы, отчёты.
- KPI начального релиза:
  - 100 % покрытие учёта движения товара и денег.
  - Автоматическая постановка задач на выкуп для каждой продажи.
  - Доступность ключевых отчётов в режиме реального времени (остатки, движение средств, прогноз выкупа).
- Ограничения: нет личных кабинетов клиентов, поставщики как справочник, ручное подтверждение финансовых операций.

## 2. Границы MVP полного цикла
- Включено:
  - Полный CRUD для сущностей из ER-диаграммы (`TZ.md`), роли super_admin/admin/manager/accountant/logistic.
  - Реализация всех бизнес-модулей (закупки, склад, продажи, выкуп, финансы, отчёты, уведомления).
  - PWA c офлайн-режимом для последних данных и уведомлениями.
  - Генерация документов (PDF), экспорт Excel, email-напоминания о выкупе.
- Исключено на данном этапе:
  - Автоматизированное тестирование, деплой, мониторинг, A/B аналитика.
  - Интеграции с платёжными шлюзами, бухгалтерскими внешними системами.
  - Массовый импорт/экспорт исторических данных (только ручной ввод/миграции).

## 3. Порядок интеграции PDF/Excel/Email
1. Бэкенд:
   - Подготовка сервисов генерации PDF (pdfmake/Puppeteer) на базе данных продаж/выкупов.
   - Реализация экспортных endpoint'ов для Excel (SheetJS).
   - Настройка SMTP (Nodemailer) с шаблонизатором писем и логированием отправок.
2. Фронтенд:
   - Внедрение вызовов API для генерации документов и экспорта в соответствующих разделах (`Продажи`, `Отчёты`).
   - UI-компоненты для скачивания документов и экспорта.
3. Инфраструктура:
   - Определение очередей/cron для email-напоминаний (60/30/7 дней).
   - Document storage (например, S3-совместимый объектный стор) — отложено до деплоя, локально сохраняем на диске/в БД.

## 4. Риски и допущения
- Требуется подтверждение партнёрами описанных KPI и границ.
- Приоритет обработки выкупов: если данные продаж неполные, допускается ручное редактирование.
- PDF/Excel-генерация предполагает не более 10 000 строк в отчётах — иначе требуется оптимизация.

## 5. Следующие шаги
- Утвердить документ с партнёрами.
- Перейти к Фазе 1: детализация архитектуры и API.

