# Фаза 6. Фронтенд: модули

## Выполнено

### 1. Типы и сервисы
- Созданы типы для всех модулей (suppliers, shipments, clients, sales, buybacks, finance, inventory, reports, notifications)
- Реализованы сервисы для работы с API всех модулей
- Добавлены утилиты форматирования (валюты, даты, дата/время)

### 2. Дашборд
- Реализован Dashboard с реальными метриками:
  - Общий баланс всех счетов
  - Количество товаров на складе
  - Продажи за текущий месяц
  - Закупки за текущий месяц
- Интеграция с API для получения данных в реальном времени

### 3. Раздел «Закупки» (ShipmentsPage)
- Таблица со списком всех поставок
- Форма создания поставки с динамическим добавлением партий
- Выбор поставщика из списка
- Валидация данных
- Отображение общей стоимости поставки

### 4. Раздел «Склад» (InventoryPage)
- Таблица остатков товаров на складе
- Форма списания с выбором партии из списка доступных
- Валидация количества (не больше остатка)
- Отображение статуса остатков (цветные badges)

### 5. Раздел «Клиенты» (ClientsPage)
- Каталог клиентов с поиском
- Форма создания/редактирования клиента
- Удаление клиентов
- Отображение типа клиента (физ. лицо/юр. лицо)
- Отображение даты первой покупки

### 6. Раздел «Продажи» (SalesPage)
- Таблица со списком всех продаж
- Форма создания продажи:
  - Поиск/выбор клиента
  - Динамическое добавление товаров из доступных партий
  - Автоматический расчёт общей суммы
  - Валидация данных
- Отмена продажи
- Отображение статуса продажи

### 7. Раздел «Выкуп» (BuybacksPage)
- Табличный вид со списком выкупов
- Фильтрация по статусам (все, запланированные, связались, завершённые, отклонённые)
- Форма создания выкупа:
  - Выбор продажи (автоматическое заполнение клиента)
  - Динамическое добавление товаров из выбранной продажи
  - Указание цены выкупа и состояния товаров
- Действия: завершить, отклонить
- Цветовая индикация статусов

### 8. Раздел «Финансы» (FinancePage)
- Виджеты с метриками:
  - Общий баланс
  - Количество счетов
  - Количество транзакций
  - Количество изъятий
- Вкладки для навигации:
  - Счета: список счетов, создание, удаление, отображение баланса
  - Транзакции: журнал операций, создание транзакций, удаление
  - Изъятия: список изъятий партнёров, создание изъятий
- Формы создания для всех сущностей
- Цветовая индикация балансов (зелёный/красный)

### 9. Раздел «Отчёты» (ReportsPage)
- Фильтры для отчётов (дата начала, дата окончания, ID клиента, ID поставки)
- Вкладки с различными отчётами:
  - Прибыль по поставкам
  - Прибыль по клиентам
  - Прогноз выкупа
  - Движение денежных средств
  - Активность клиентов
- Таблицы с данными отчётов
- Кнопки экспорта (заглушки)

### 10. Профиль пользователя (ProfilePage)
- Отображение информации о пользователе:
  - Аватар с инициалами
  - ФИО, email, роль
- Форма смены пароля (заглушка)
- Интеграция с AuthContext

### 11. Улучшения навигации
- Обновлён AppHeader:
  - Отображение количества непрочитанных уведомлений
  - Ссылка на профиль в меню пользователя
- Все маршруты подключены в App.tsx
- Защищённые маршруты с проверкой аутентификации

## Технические детали

### Использованные технологии
- **TanStack Query**: для управления состоянием и кэширования данных
- **Mantine Forms**: для валидации форм
- **Mantine Notifications**: для уведомлений пользователя
- **React Router DOM**: для маршрутизации
- **TypeScript**: для типобезопасности

### Паттерны
- Все формы используют `useForm` из Mantine для валидации
- Все мутации используют `useMutation` из TanStack Query
- Инвалидация кэша после успешных операций
- Обработка ошибок с показом уведомлений
- Загрузочные состояния для всех асинхронных операций

### Интеграция с бэкендом
- Все эндпоинты API интегрированы
- Корректная обработка ответов бэкенда
- Автоматическое обновление данных после операций
- Обработка ошибок с показом сообщений пользователю

## Следующие шаги
- Добавить экспорт отчётов в PDF и Excel (Фаза 7)
- Реализовать генерацию документов (акты, счета, накладные) (Фаза 7)
- Добавить графики и визуализацию данных на дашборде
- Реализовать функциональность смены пароля
- Добавить страницу уведомлений
- Улучшить формы создания (автозаполнение, валидация на стороне клиента)
- Добавить фильтры и сортировку в таблицы
- Реализовать пагинацию для больших списков
